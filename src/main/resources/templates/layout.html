<!DOCTYPE html>
<html>

<head th:fragment="head(title)">
	<meta charset="UTF-8">
	<meta name="description" content="codelean Template">
	<meta name="keywords" content="codelean, unica, creative, html">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title th:replace="${title}">Vegetable | Shop</title>
	<link rel="icon" type="image/png" sizes="144x144" th:href="@{/images/logo.png}">

	<!-- Google Font -->
	<link href="https://fonts.googleapis.com/css?family=Muli:300,400,500,600,700,800,900&display=swap" rel="stylesheet">

	<!-- Css Styles -->
	<link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" type="text/css">
	<link rel="stylesheet" th:href="@{/css/font-awesome.min.css}" type="text/css">
	<link rel="stylesheet" th:href="@{/css/themify-icons.css}" type="text/css">
	<link rel="stylesheet" th:href="@{/css/elegant-icons.css}" type="text/css">
	<link rel="stylesheet" th:href="@{/css/owl.carousel.min.css}" type="text/css">
	<link rel="stylesheet" th:href="@{/css/nice-select.css}" type="text/css">
	<link rel="stylesheet" th:href="@{/css/jquery-ui.min.css}" type="text/css">
	<link rel="stylesheet" th:href="@{/css/slicknav.min.css}" type="text/css">
	<link rel="stylesheet" th:href="@{/css/style.css}" type="text/css">

	<!-- Js Plugins -->
	<script th:src="@{/js/jquery-3.3.1.min.js}"></script>
	<script th:src="@{/js/bootstrap.min.js}"></script>
	<script th:src="@{/js/jquery-ui.min.js}"></script>
	<script th:src="@{/js/jquery.countdown.min.js}"></script>
	<script th:src="@{/js/jquery.nice-select.min.js}"></script>
	<script th:src="@{/js/jquery.zoom.min.js}"></script>
	<script th:src="@{/js/jquery.dd.min.js}"></script>
	<script th:src="@{/js/jquery.slicknav.js}"></script>
	<script th:src="@{/js/owl.carousel.min.js}"></script>
	<script th:src="@{/js/main.js}"></script>
</head>

<body>
	<header th:fragment="header" class="header-section">
		<div class="header-top">
			<div class="container">
				<div class="ht-left">
					<div class="mail-service">
						<i class="fa fa-envelope"></i>
						vegetableshop@gmail.com
					</div>
					<div class="phone-service">
						<i class="fa fa-phone"></i>
						+84 11.11.11.111
					</div>
				</div>

				<div class="ht-right">
					<a href="/logout" class="login-panel" th:if="${session.username}">
						<i class="fa fa-user"></i>
						<span th:utext="${session.username} +' - Thoát'"></span>
					</a>
					<a href="/login" class="login-panel" th:unless="${session.username}">
						<i class="fa fa-user"></i>Đăng Nhập
					</a>

					<div class="top-social">
						<a href="#"> <i class="ti-facebook"></i> </a>
						<a href="#"> <i class="ti-twitter-alt"></i> </a>
					</div>
				</div>
			</div>
		</div>

		<div class="container">
			<div class="inner-header" style="padding: 0">
				<div class="row">
					<div class="col-lg-3 col-md-3 ">
						<div class="logo">
							<a href="/home">
								<img th:src="@{/images/logo.png}" height="120" width="170">
							</a>
						</div>
					</div>
					<div class="col-lg-7 col-md-7" style="padding: 45px 0">

						<form action="/shop/search" method="get">
							<div class="advanced-search">
								<div class="input-group" style="max-width: 100%">
									<input name="keyword" th:value="${keyword}" class="search-areay" type="text"
										placeholder="Nhập sản phẩm, danh mục hoặc từ khóa...">
									<button type="submit"> <i class="ti-search"></i> </button>
								</div>
							</div>
						</form>
					</div>
					<div class="col-lg-2 col-md-2" style="text-align:center">
						<ul class="nav-right" style="padding: 50px 0">

							<li class="cart-icon" id="cartNotifi">

								<div class="cart-hover">
									<div class="select-items">
										<table>
											<tbody id="bodyCart"></tbody>
										</table>
									</div>
									<div class="select-total">
										<span>Tổng chi phí:</span>
										<h5 class="totalPrice"></h5>
									</div>
									<div class="select-button">
										<a href="/cart" class="primary-btn view-card">Xem Giỏ Hàng</a>
										<a href="/checkout" class="primary-btn checkout-btn">Thanh Toán</a>
									</div>
								</div>
							</li>
							<li class="cart-price"></li>
						</ul>
					</div>
				</div>
			</div>
		</div>

		<div class="nav-item">
			<div class="container">
				<nav class="nav-menu mobile-menu">
					<ul>
						<li class="active"><a style="padding: 16px 70px 15px" href="/">Trang chủ</a></li>
						<li><a style="padding: 16px 70px 15px" href="/shop">Cửa hàng</a></li>
						<li><a style="padding: 16px 70px 15px" href="/introduce">Giới thiệu</a></li>
						<li><a style="padding: 16px 70px 15px" href="/contact">Liên hệ</a></li>
						<li><a style="padding: 16px 70px 15px" href="">Khác</a>
							<ul class="dropdown">
								<li><a href="/cart">Giỏ hàng</a></li>
								<li><a href="/checkout">Thanh toán</a></li>
								<li><a href="/register">Đăng kí</a></li>
								<li><a href="/login">Đăng nhập</a></li>
							</ul>
						</li>
					</ul>
				</nav>
				<div id="mobile-menu-wrap">
				</div>
			</div>
		</div>
	</header>


	<footer th:fragment="footer" class="footer-section">
		<div class="container">
			<div class="row">
				<div class="col-lg-3">
					<div class="footer-left">
						<div class="footer-logo">
							<a href="/home">
								<img th:src="@{/images/logo.png}" height="110" width="150" alt="">
							</a>
						</div>
						<ul>
							<li>Hà Nội</li>
							<li>Phone: +84 11.11.11.111</li>
							<li>Email: vegetableshop@gmail.com</li>
						</ul>
						<div class="footer-social">
							<a href="#"><i class="fa fa-facebook"></i></a>
							<a href="#"><i class="fa fa-twitter"></i></a>
						</div>
					</div>
				</div>
				<div class="col-lg-2 offset-lg-1">
					<div class="footer-widget">
						<h5>Thông Tin</h5>
						<ul>
							<li><a href="/introduce">Giới thiệu</a></li>
							<li><a href="/contact">Liên hệ</a></li>
						</ul>
					</div>
				</div>
				<div class="col-lg-2">
					<div class="footer-widget">
						<h5>Tài Khoản</h5>
						<ul>
							<li><a href="/checkout">Thanh toán</a></li>
							<li><a href="/cart">Giỏ hàng</a></li>
							<li><a href="/shop">Cửa hàng</a></li>
						</ul>
					</div>
				</div>
				<div class="col-lg-4 ">
					<div class="newslatter-item">
						<h5>Tham gia đăng ký nhận tin tức của chúng tôi ngay</h5>
						<p>Nhận cập nhật qua email về cửa hàng của chúng tôi và các ưu đãi đặc biệt.</p>
						<form action="#" class="subscribe-form">
							<input type="text" placeholder="Nhập Email của bạn">
							<button type="button">Đăng kí</button>
						</form>
					</div>
				</div>
			</div>
		</div>
	</footer>
</body>

<script th:fragment="script">
	var shoppingCart = JSON.parse(sessionStorage.getItem('cart'));
	let totalCart = 0;
	if (shoppingCart !== null) {
		itemCount = shoppingCart.length;
		$("#cartNotifi").append(
			`<a href="/cart">
                        <i class="icon_bag_alt"></i>
                        <span >${itemCount}</span>
                    </a>`);
		shoppingCart.map((cart) => {
			totalCart += cart.price * cart.quantity;
			$("#bodyCart").append(
				`<tr>
                        <td class="si-pic" > 
                            <img style="width: 150px; height:70px" src="images/products/${cart.image}" alt="${cart.productName}"> 
                        </td>
                        <td class="si-text" style="width: 150px;">
                            <div class="product-selected">
                                <p>${cart.price} x ${cart.quantity}</p>
                                <h6>${cart.productName}</h6>
                            </div>
                        </td>
                        
                    </tr>`
			);
			$(".totalPrice").text(`${totalCart}vnđ`);
			$(".cart-price").text(`${totalCart}vnđ`);
		});
	} else {
		$("#cartNotifi").append(
			`<a href="/cart">
                        <i class="icon_bag_alt"></i>
                        <span>0</span>
                    </a>`);
		$(".cart-price").text(`${totalCart}vnđ`);
		$(".totalPrice").append(`0vnđ`);
	}
</script>

</html>